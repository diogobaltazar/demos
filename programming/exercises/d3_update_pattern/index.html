<!DOCTYPE html>
<html lang="en" >
<head>
<meta charset="UTF-8">
<script src='https://d3js.org/d3.v5.js'></script>
</head>
<body>
    <script type="text/javascript">

        d3
        .select('body')
        .append('svg')
        .attr('height', 1000)
        .attr('width', 500)
        .style("background-color", '#fa9191')

        const svg = d3.select('svg')

        create_vertice = (id = Math.trunc(Math.random() * 100), radius = 10, color = '#eb6383') => ({
            id, radius, color
        })

        create_edge = (from, to, length) => ({
            from, to, radius
        })

        let edges = d3.range(10).map(_ => create_vertice())

        const render = (selection, props) => {
            const { data } = props
            join = selection.selectAll('circle').data(data)

            join.enter() // data elems without dom elems
                    .append('circle')
                    .attr('cx', (_, i) => i * 20 + 100)
                    .attr('cy', +selection.attr("height") / 2)
                    .attr('r', _ => 0)
                .merge(join) // data elems with dom elems or without elems
                    .attr('fill', _ => _.color)
                    .transition()
                        .duration(1000)
                        .attr('r', _ => _.radius) // enter/update with transition

            join // data elems with dom elems
                .style("stroke", '#120136')

            join.exit() // dom elems without data elems
                .transition()
                    .duration(1000)
                    .attr('r', _ => 0) // remove with transition
                .remove()
        }

        for (i = 2; i <= edges.length + 1; i++)
            setTimeout(
                i % 2 ? 
                    () => { // trigger exit
                        max = edges.length - 1
                        rvi = Math.trunc(Math.random() * max)
                        edges = edges.filter((_, i) => i != rvi)
                        render(svg, { data: edges })
                    } :
                    () => { // trigger update
                        max = edges.length - 1
                        rvi = Math.trunc(Math.random() * max)
                        edges[rvi].color = '#b4f2e1'
                        edges[rvi].radius *= Math.random()
                        render(svg, { data: edges })
                    },
                time = 1000 * i
            )

    </script>
</body>
</html>